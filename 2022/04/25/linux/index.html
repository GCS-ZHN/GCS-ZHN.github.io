<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="linux学习笔记"><meta name="keywords" content="shell,linux,OS"><meta name="author" content="GCS-ZHN,undefined"><meta name="copyright" content="GCS-ZHN"><title>linux学习笔记【潇洒记忆】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- script(src=url_for("/js/mathjax/mathjax.js"))--><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  gitment: {},
  valine: {},
}</script><meta name="generator" content="Hexo 6.0.0"></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E6%9F%A5%E7%9C%8B%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">一、环境变量的查看与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 环境变量的查看</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%B8%B4%E6%97%B6%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 临时环境变量的设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%B0%B8%E4%B9%85%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 永久环境变量的设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81IO%E7%AE%A1%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">二、IO管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cp"><span class="toc-number">2.1.</span> <span class="toc-text">cp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scp"><span class="toc-number">2.2.</span> <span class="toc-text">scp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mv"><span class="toc-number">2.3.</span> <span class="toc-text">mv</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rm"><span class="toc-number">2.4.</span> <span class="toc-text">rm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mkdir"><span class="toc-number">2.5.</span> <span class="toc-text">mkdir</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pwd"><span class="toc-number">2.6.</span> <span class="toc-text">pwd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dirname"><span class="toc-number">2.7.</span> <span class="toc-text">dirname</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#basename"><span class="toc-number">2.8.</span> <span class="toc-text">basename</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cat"><span class="toc-number">2.9.</span> <span class="toc-text">cat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tail"><span class="toc-number">2.10.</span> <span class="toc-text">tail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#head"><span class="toc-number">2.11.</span> <span class="toc-text">head</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cd"><span class="toc-number">2.12.</span> <span class="toc-text">cd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ls"><span class="toc-number">2.13.</span> <span class="toc-text">ls</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#echo"><span class="toc-number">2.14.</span> <span class="toc-text">echo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ln"><span class="toc-number">2.15.</span> <span class="toc-text">ln</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ll"><span class="toc-number">2.16.</span> <span class="toc-text">ll</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tar"><span class="toc-number">2.17.</span> <span class="toc-text">tar</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tar-gz"><span class="toc-number">2.17.1.</span> <span class="toc-text">tar.gz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tar-bz2"><span class="toc-number">2.17.2.</span> <span class="toc-text">tar.bz2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zip"><span class="toc-number">2.18.</span> <span class="toc-text">zip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unzip"><span class="toc-number">2.19.</span> <span class="toc-text">unzip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jq"><span class="toc-number">2.20.</span> <span class="toc-text">jq</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">三、进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ps"><span class="toc-number">3.1.</span> <span class="toc-text">ps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kill"><span class="toc-number">3.2.</span> <span class="toc-text">kill</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jobs"><span class="toc-number">3.3.</span> <span class="toc-text">jobs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nohup"><span class="toc-number">3.4.</span> <span class="toc-text">nohup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#screen"><span class="toc-number">3.5.</span> <span class="toc-text">screen</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#top"><span class="toc-number">3.6.</span> <span class="toc-text">top</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">四、网络与服务管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ifconfig"><span class="toc-number">4.1.</span> <span class="toc-text">ifconfig</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lsof"><span class="toc-number">4.2.</span> <span class="toc-text">lsof</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#service"><span class="toc-number">4.3.</span> <span class="toc-text">service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#history"><span class="toc-number">4.4.</span> <span class="toc-text">history</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh"><span class="toc-number">4.5.</span> <span class="toc-text">ssh</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ssh%E7%99%BB%E5%BD%95"><span class="toc-number">4.5.1.</span> <span class="toc-text">ssh登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-number">4.5.2.</span> <span class="toc-text">SSH端口转发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SSH%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-number">4.5.2.1.</span> <span class="toc-text">SSH本地端口转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSH%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-number">4.5.2.2.</span> <span class="toc-text">SSH远程端口转发</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">4.5.3.</span> <span class="toc-text">SSH远程执行命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sshpass"><span class="toc-number">4.6.</span> <span class="toc-text">sshpass</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#route"><span class="toc-number">4.7.</span> <span class="toc-text">route</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8"><span class="toc-number">4.7.1.</span> <span class="toc-text">查看路由表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1%EF%BC%88%E7%BD%91%E5%85%B3%EF%BC%89"><span class="toc-number">4.7.2.</span> <span class="toc-text">添加或删除默认路由（网关）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%9B%BA%E5%AE%9A%E8%B7%AF%E7%94%B1"><span class="toc-number">4.7.3.</span> <span class="toc-text">添加或删除固定路由</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reboot"><span class="toc-number">4.8.</span> <span class="toc-text">reboot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shutdown"><span class="toc-number">4.9.</span> <span class="toc-text">shutdown</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tc6000%E8%8A%82%E7%82%B9%E6%A0%A1%E5%9B%AD%E7%BD%91%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.10.</span> <span class="toc-text">tc6000节点校园网连接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%B4%A6%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">五、账户与权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#whoami"><span class="toc-number">5.1.</span> <span class="toc-text">whoami</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#id"><span class="toc-number">5.2.</span> <span class="toc-text">id</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chmod"><span class="toc-number">5.3.</span> <span class="toc-text">chmod</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chown"><span class="toc-number">5.4.</span> <span class="toc-text">chown</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chgrp"><span class="toc-number">5.5.</span> <span class="toc-text">chgrp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useradd"><span class="toc-number">5.6.</span> <span class="toc-text">useradd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#userdel"><span class="toc-number">5.7.</span> <span class="toc-text">userdel</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#usermod"><span class="toc-number">5.8.</span> <span class="toc-text">usermod</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#groupadd"><span class="toc-number">5.9.</span> <span class="toc-text">groupadd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#groupdel"><span class="toc-number">5.10.</span> <span class="toc-text">groupdel</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#groupmod"><span class="toc-number">5.11.</span> <span class="toc-text">groupmod</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clusconf"><span class="toc-number">5.12.</span> <span class="toc-text">clusconf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chsh"><span class="toc-number">5.13.</span> <span class="toc-text">chsh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exit"><span class="toc-number">5.14.</span> <span class="toc-text">exit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#logout"><span class="toc-number">5.15.</span> <span class="toc-text">logout</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">六、设备管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cfdisk"><span class="toc-number">6.1.</span> <span class="toc-text">cfdisk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#df"><span class="toc-number">6.2.</span> <span class="toc-text">df</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lsblk"><span class="toc-number">6.3.</span> <span class="toc-text">lsblk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mount"><span class="toc-number">6.4.</span> <span class="toc-text">mount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#umount"><span class="toc-number">6.5.</span> <span class="toc-text">umount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mkfs"><span class="toc-number">6.6.</span> <span class="toc-text">mkfs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mkfs-ext4"><span class="toc-number">6.7.</span> <span class="toc-text">mkfs.ext4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lspci"><span class="toc-number">6.8.</span> <span class="toc-text">lspci</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nvidia-smi"><span class="toc-number">6.9.</span> <span class="toc-text">nvidia-smi</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lscpu"><span class="toc-number">6.10.</span> <span class="toc-text">lscpu</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%B6%E5%8C%BA%E7%AE%A1%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">七、时间与时区管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ntpdate"><span class="toc-number">7.1.</span> <span class="toc-text">ntpdate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#date"><span class="toc-number">7.2.</span> <span class="toc-text">date</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hwclock"><span class="toc-number">7.3.</span> <span class="toc-text">hwclock</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clusconf-1"><span class="toc-number">7.4.</span> <span class="toc-text">clusconf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ntpd"><span class="toc-number">7.5.</span> <span class="toc-text">ntpd</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">GCS-ZHN</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/GCS-ZHN" target="_blank">GitHub<i class="icon-dot bg-color6"></i></a><a class="links-button button-hover" href="mailto:zhang.h.n@foxmail.com" target="_blank">E-Mail<i class="icon-dot bg-color9"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">26</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">55</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">18</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/archives">归档</a></nav><div class="right-info"><a class="title-name" href="/">潇洒记忆</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">linux学习笔记</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2022-04-25 | 更新于 2024-10-24</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/shell/">shell</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/linux/">linux</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/OS/">OS</a></div></div></div><div class="main-content"><h1 id="一、环境变量的查看与配置"><a href="#一、环境变量的查看与配置" class="headerlink" title="一、环境变量的查看与配置"></a>一、环境变量的查看与配置</h1><h2 id="1-1-环境变量的查看"><a href="#1-1-环境变量的查看" class="headerlink" title="1.1 环境变量的查看"></a>1.1 环境变量的查看</h2><p><code>$PATH</code></p>
<p>通过“$+名称”的形式查看环境变量。这里以添加路径<code>/usr/local/gcc-8.3.0/bin</code>到环境变量为例，该路径是gcc、g++等C/C++编译器命令的目录。</p>
<h2 id="1-2-临时环境变量的设置"><a href="#1-2-临时环境变量的设置" class="headerlink" title="1.2 临时环境变量的设置"></a>1.2 临时环境变量的设置</h2><p>（1）bash脚本中变量</p>
<p><code>v=$1</code></p>
<p>通过如上形式同其他编程语言一样产生变量，并用“$”查看。</p>
<p>效用范围：当前bash脚本</p>
<p>（2）export命令配置环境变量</p>
<p><code>export PATH=$PATH:/usr/local/gcc-8.3.0/bin</code></p>
<p>效用范围：当前终端连接，所有用户。不同路径间分隔符用“:”，$PATH放在其中用于拼接原有的路径。下同。</p>
<p>（3）/etc/profile</p>
<p><code>export PATH=$PATH:/usr/local/gcc-8.3.0/bin</code></p>
<p>这个文件中添加同样的命令，并</p>
<p><code>source /etc/profile</code></p>
<p>效用范围：重启系统前，属于临时环境变量，只有效于当前终端连接和所有用户。重启系统后，属于全局环境变量，长期有效。<br><span id="more"></span></p>
<h2 id="1-3-永久环境变量的设置"><a href="#1-3-永久环境变量的设置" class="headerlink" title="1.3 永久环境变量的设置"></a>1.3 永久环境变量的设置</h2><p>（1）~/.bashrc</p>
<p><code>export PATH=$PATH:/usr/local/gcc-8.3.0/bin</code></p>
<p>在上述文件中添加同样的命令，在下次用户登录时生效或者通过<code>source ~/.bashrc</code>立即生效。</p>
<p>效用范围：永久，当前用户</p>
<p>（2）/etc/bashrc</p>
<p><code>export PATH=$PATH:/usr/local/gcc-8.3.0/bin</code></p>
<p>在上述文件中添加同样的命令，在下次用户登录时生效或者通过<code>source /etc/bashrc</code>立即生效。</p>
<p>原理：每次所有用户终端连接时会执行这个脚本</p>
<p>效用范围：永久，所有用户。</p>
<p>（3）/etc/profile</p>
<p>同前所述，不同的是，需要重启系统才能永久生效。</p>
<p>效用范围：永久，所有用户</p>
<h1 id="二、IO管理"><a href="#二、IO管理" class="headerlink" title="二、IO管理"></a>二、IO管理</h1><h2 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h2><p>用于文件拷贝</p>
<h2 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h2><p>用于文件的跨服务器传输拷贝</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -p 22 &lt;USER&gt;@&lt;HOST&gt;:&lt;SOURCE_ABSOLUATE_PATH&gt; &lt;TARGET_PATH&gt;</span><br></pre></td></tr></table></figure>
<p>从远端拷贝到当前。</p>
<h2 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h2><p>用于文件的移动或重命名</p>
<h2 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h2><p>用于文件或文件夹的删除<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf / <span class="comment"># 删库跑路坐牢一条龙</span></span><br></pre></td></tr></table></figure></p>
<h2 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h2><p>创建文件夹，注意不能递归创建，必须先有父目录</p>
<h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><p>abbreviation of “print working directory”, get the absolute path of current working dir.</p>
<h2 id="dirname"><a href="#dirname" class="headerlink" title="dirname"></a>dirname</h2><p><code>dirname &lt;PATH&gt;</code></p>
<p>获取指定路径的父路径名，实际上它只是利用路径分隔符对路径输入进行分隔，不能保证输入路径的有效性。</p>
<h2 id="basename"><a href="#basename" class="headerlink" title="basename"></a>basename</h2><p><code>basename &lt;PATH&gt;</code></p>
<p>获取指定路径的基础文件名（文件/文件夹），原理与dirname一样。</p>
<h2 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h2><p>用于输出整个文本文件到std</p>
<h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><p>用于输出文本文件末尾到std<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f log.txt</span><br></pre></td></tr></table></figure><br>实时输出文件末尾新增情况。</p>
<p><code>tail -n 100 log.txt</code><br>输出末尾100行</p>
<h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><p>用于输出文本文件头部到std，用法同tail。</p>
<h2 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h2><p>打开指定目录</p>
<h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p>罗列指定目录下条目，常用为<code>ls -hl</code></p>
<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><p>输出指定变量值到std</p>
<h2 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h2><p>创建文件链接，常用于软连接创建<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /usr/local/gcc-8.3.0/bin/g++ /usr/bin/g++</span><br></pre></td></tr></table></figure></p>
<h2 id="ll"><a href="#ll" class="headerlink" title="ll"></a>ll</h2><p>查看指定文件的链接，指向，常用于寻找链接文件的真实路径。是一个命令别名而非独立命令。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -alF&#x27;</span></span><br><span class="line">ll /usr/bin/g++</span><br><span class="line"><span class="comment"># /usr/bin/g++ -&gt; /usr/local/gcc-8.3.0/bin/g++</span></span><br></pre></td></tr></table></figure></p>
<h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><p>常用于解压或压缩tar.gz等文件。</p>
<h3 id="tar-gz"><a href="#tar-gz" class="headerlink" title="tar.gz"></a>tar.gz</h3><ul>
<li>解压：<code>tar zxvfv mpc-1.2.1.tar.gz</code></li>
<li>压缩：<code>tar –czf jpg.tar.gz *.jpg</code></li>
</ul>
<h3 id="tar-bz2"><a href="#tar-bz2" class="headerlink" title="tar.bz2"></a>tar.bz2</h3><ul>
<li>解压：<code>tar jxf gmp-6.2.1.tar.bz2</code></li>
</ul>
<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><p>压缩产生zip文件</p>
<h2 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h2><p>解压zip文件</p>
<h2 id="jq"><a href="#jq" class="headerlink" title="jq"></a>jq</h2><p>json解析命令。用<code>.[i]</code>来索引数组，用<code>.key或.&quot;key&quot;</code>来取对应的key值。非系统自带，需要第三方安装下载。这个命令的一个有点在于简便，没有任何其他依赖，只需要一个可执行文件。</p>
<h1 id="三、进程管理"><a href="#三、进程管理" class="headerlink" title="三、进程管理"></a>三、进程管理</h1><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><p>查看运行进程。常用搭配<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux|grep &lt;information&gt;</span><br></pre></td></tr></table></figure><br>用于查找指定信息的进程。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo pid,ppid,vsz,<span class="built_in">command</span></span><br></pre></td></tr></table></figure><br>用于输出指定信息列，示例中包含了进程号“PID”，父进程号“PPID”，虚拟内存占用“VSZ”和执行命令“COMMAND”。<a target="_blank" rel="noopener" href="https://www.cnblogs.com/fps2tao/p/7692482.html">参见文档</a></p>
<h2 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h2><p>终止指定PID（process id）的进程</p>
<h2 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h2><p>列举当前链接用户终端进程</p>
<h2 id="nohup"><a href="#nohup" class="headerlink" title="nohup"></a>nohup</h2><p>用于进程忽略终端退出信号而持续运行。常用于那些长时间运行的任务，常于“&amp;”和输出重定向搭配<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> jupyter notebook &gt;&gt; jupyter41.log 2 &gt; 1&amp; &amp;</span><br></pre></td></tr></table></figure></p>
<h2 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h2><p>screen是一个多视窗管理工具，也是一个后台管理工具。通过screen可以创建多个独立视窗，并忽视终端退出信号。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">screen -S &lt;视窗名称&gt;      创建新的视窗，并自动进入（即Attach状态）</span><br><span class="line">screen -r &lt;视窗ID或名称&gt;  恢复进入Detach的视窗</span><br><span class="line">screen -ls                查看当前所有的视窗</span><br><span class="line">screen &lt;命令&gt;             创建匿名视窗并执行shell命令</span><br><span class="line">screen -d &lt;视窗ID或名称&gt;  detach指定视窗（不会终止视窗内进程）</span><br><span class="line">Ctrl + A +D               切换回主视窗（即Detach当前视窗）</span><br><span class="line">Ctrl + D 或 exit          删除当前视窗</span><br></pre></td></tr></table></figure></p>
<h2 id="top"><a href="#top" class="headerlink" title="top"></a>top</h2><p>top命令用于查看进程资源占用情况的top排名。PID为进程号，USER为用户，VIRT为虚拟内存，RES为物理内存，SHR为共享内存， %CPU为进程的CPU核时间相对一个CPU核运行总时间的比例（故占用多个CPU核心的进程，其值超过100%）。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Tasks: 587 total,   1 running, 584 sleeping,   2 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem : 26360129+total,  9660912 free,  5966312 used, 24797406+buff/cache</span><br><span class="line">KiB Swap: 16777212 total, 16777212 free,        0 used. 25584766+avail Mem</span><br><span class="line"></span><br><span class="line">    PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">20149 root      20   0 1745724 265144   3836 S   0.0  0.1  17:34.62 sm</span><br><span class="line">158293 root      20   0 6609532 261320  22520 S   0.0  0.1   0:16.98 java</span><br><span class="line">158045 root      20   0 1370436 109704  19792 S   0.0  0.0   0:28.06 node</span><br><span class="line">10167 root      20   0  219244 107056 106696 S   0.0  0.0   4:23.27 systemd-journal</span><br><span class="line">62065 root      20   0 3991400 106604  30936 S   0.0  0.0   5:39.75 dockerd</span><br><span class="line">144536 root      20   0 1089432  78836  18328 S   0.0  0.0   0:55.32 node</span><br><span class="line">144506 root      20   0 7413524  69824  11628 S   0.0  0.0   0:07.45 jupyter-lab</span><br><span class="line">144525 root      20   0  915576  66192  17376 S   0.0  0.0   0:07.23 node</span><br></pre></td></tr></table></figure></p>
<h1 id="四、网络与服务管理"><a href="#四、网络与服务管理" class="headerlink" title="四、网络与服务管理"></a>四、网络与服务管理</h1><h2 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h2><p>列举当前服务器网卡配置</p>
<h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><p>列举当前服务器网络端口绑定情况，常用搭配</p>
<p><code>lsof -i:&lt;port&gt;</code></p>
<p>用于列举指定端口，注意冒号中间无空格。</p>
<h2 id="service"><a href="#service" class="headerlink" title="service"></a>service</h2><p>用于对指定服务进行操作，如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service network start <span class="comment">#启动网络服务</span></span><br><span class="line">service network shutup <span class="comment">#关闭网络服务，远程连接时慎入</span></span><br><span class="line">service network restart <span class="comment">#重启网络服务，远程连接时慎入</span></span><br></pre></td></tr></table></figure></p>
<h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><p>用于列举输入的全部历史命令，比用方向键高效。常和grep配合使用，如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span>|grep <span class="string">&quot;docker run&quot;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><p>ssh服务是Linux服务器远程登录的基础服务。在正确配置ssh服务并启动<code>systemctl start sshd</code>，可以通过ssh命令进行远程登录、ssh隧道转发等。</p>
<h3 id="ssh登录"><a href="#ssh登录" class="headerlink" title="ssh登录"></a>ssh登录</h3><p><code>ssh [-p &lt;PORT&gt; -i &lt;KEY_FILE&gt; &lt;USER&gt;@]&lt;IP|HOST&gt;</code></p>
<ul>
<li>登录方式一般分为密码登录和公钥免密登录。</li>
<li><code>[]</code>内为可选参数。</li>
<li><code>-p</code>指定登录端口号<code>&lt;PORT&gt;</code>，默认端口号为22。</li>
<li>可以指定登录用户名<code>&lt;USER&gt;</code>，与IP用<code>@</code>分隔。不指定时，默认使用当前登录远程终端的用户名（相当于先调用了<code>whoami</code>获取了用户名）。 </li>
<li><code>-i</code>指定公钥文件<code>&lt;KEY_FILE&gt;</code>，使用公钥登录时需要指定。</li>
</ul>
<h3 id="SSH端口转发"><a href="#SSH端口转发" class="headerlink" title="SSH端口转发"></a>SSH端口转发</h3><p>SSH端口转发，也称基于SSH隧道的内网穿透，主要用于解决主机无法访问的问题。在SSH端口转发中，有三个主机概念：</p>
<ul>
<li>源主机：发出数据的主机</li>
<li>目标主机：接收数据的主机</li>
<li>代理主机/中介主机：负责源主机和目标主机的桥接</li>
</ul>
<p>有两个端口概念：</p>
<ul>
<li>源端口：源主机的监听端口，源主机的SSH服务会主动监听该端口，将所有发送到该端口的数据通过SSH隧道转发到目标主机的目标端口</li>
<li>目标端口：目标主机接收数据的端口</li>
</ul>
<p>可以直观理解为建立了<code>源主机:源端口---&gt;目标主机:目标端口</code>的一对端口映射。根据源主机的不同，可以分为<code>本地端口转发</code>和<code>远程端口转发</code>。</p>
<h4 id="SSH本地端口转发"><a href="#SSH本地端口转发" class="headerlink" title="SSH本地端口转发"></a>SSH本地端口转发</h4><p>本地端口转发，<strong>源主机即当前操作SSH命令的主机</strong>，可以是你本地的PC，也可以是你SSH远程登录的服务器等。其基本使用命令如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -g -L [允许的访问主机:]源端口:目标主机:目标端口 代理主机</span><br></pre></td></tr></table></figure></p>
<ul>
<li>-f 类似于nohup，表示background运行</li>
<li>-L 代表本地端口转发(login)，也就是名称的本地。因为它是利用本机的端口进行转发。</li>
<li>-g 代表允许发送给源端口的信息不必是源主机，可以是任何可以连接源主机的主机(global)，例如我们建立了node12服务器节点的端口转发，那么PC就可以直接通过这个端口访问目标主机。否则只能是来自源主机自身的数据。</li>
<li>-N 代表不执行远程命令时不登录（nologin），否则会登录代理主机</li>
</ul>
<p><code>-g</code>参数是否使用，可以看到如下差别，即使用<code>-g</code>，监听的是来自任意主机（<code>*</code>号表示通配任何主机）的TCP连接请求；而不使用则只监听来自<code>localhost</code>的TCP连接请求。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -L 3301:localhost:3302 localhost &amp;&amp; lsof -i:3301</span><br><span class="line">ssh     42420 root    4u  IPv6 2545727      0t0  TCP localhost:3301 (LISTEN)</span><br><span class="line">ssh     42420 root    5u  IPv4 2545728      0t0  TCP localhost:3301 (LISTEN)</span><br><span class="line"></span><br><span class="line">ssh -f -N -g -L 3303:localhost:3302 localhost &amp;&amp; lsof -i:3303</span><br><span class="line">ssh     42462 root    4u  IPv4 2546004      0t0  TCP *:3303 (LISTEN)</span><br><span class="line">ssh     42462 root    5u  IPv6 2546005      0t0  TCP *:3303 (LISTEN)</span><br></pre></td></tr></table></figure><br>下例就让本机监听了自己的TCP/2241端口，并转发到node41的22端口。这个转发可以用来远程ssh登录内网服务器41节点。本机自身充当中间主机。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -g -L <span class="string">&quot;2241:node41:22&quot;</span> localhost</span><br></pre></td></tr></table></figure><br>下例用于连接node200节点。通过node12作为中间主机，因为当前主机无法直连node200。此时请求会从本地2233端口，通过中间机node12，转发给目标机node200的22端口。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -g -L <span class="string">&quot;2233:node200:22&quot;</span> user@node12</span><br></pre></td></tr></table></figure><br>在不使用<code>-g</code>开放访问时，可以通过允许访问的主机限制远程访问，例如下例允许与本地主机相同局域网的其他机子访问本地端口2233，通过中间机node12，转发给目标机node200的22端口。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -L <span class="string">&quot;*:2233:node200:22 user@node12&quot;</span></span><br></pre></td></tr></table></figure><br>在不使用<code>-N</code>选项禁止登录时，执行上述命令会登录代理主机node12。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -L <span class="string">&quot;2233:node200:22 user@node12&quot;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="SSH远程端口转发"><a href="#SSH远程端口转发" class="headerlink" title="SSH远程端口转发"></a>SSH远程端口转发</h4><p>远程端口转发，<strong>源主机为远程主机，中介主机为当前主机</strong>。本地转发是将本地端口映射到指定端口，适用于将个人PC转发至服务器。但相应反过来将服务器转发至个人PC却不行，因为一般情况下个人PC没有ssh服务，服务器无法直接发起ssh连接到PC，需要PC主动连接服务器。远程转发是将远程端口映射到指定端口，刚好解决这个问题，个人PC发出SSH连接服务器后，让服务器监听自己的指定端口，并转发到个人PC指定端口。其命令格式与本地转发相似</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -g -R 源端口:目标主机:目标端口 源主机</span><br></pre></td></tr></table></figure>
<p>即将<code>-L</code>（local）改为<code>-R</code>(remote)。例如下例将node2:3390转发至localhost:22。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -g -R <span class="string">&quot;3390:localhost:22&quot;</span> node2</span><br></pre></td></tr></table></figure><br>当然目标主机不一定是执行命令的主机，可以是任意能够被当前执行命令主机（中介主机）连接到的服务器。例如下例建立了node200:3301到node12:22的连接，而两主机本身无法直连。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -f -N -g -R <span class="string">&quot;3301:node12:22&quot;</span> user@node200</span><br></pre></td></tr></table></figure><br>值得注意的是，此时监听端口的sshd服务是在node200上，而发起端口转发的发起者是本地机子sshd服务。而sshd服务默认只允许远程端口转发的监听端口只接受来自localhost的请求（即node200发的TCP数据），即会让<code>-g</code>参数强制无效，毕竟这个参数也是远程转发指定的，有安全风险。例如在个人电脑上，<code>ssh node200 -p 3301</code>会报错<code>Connection Refused</code>。因为本地电脑不是node200。为此，需要配置node200的<code>/etc/ssh/sshd_config</code>中<code>GatewayPorts</code>为<code>yes</code>，方可远程访问源端口。而<code>-g</code>参数只有在开启后，才能实现控制。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/f-ck-need-u/p/10482832.html">参考资源</a></p>
<h3 id="SSH远程执行命令"><a href="#SSH远程执行命令" class="headerlink" title="SSH远程执行命令"></a>SSH远程执行命令</h3><p><code>ssh &lt;IP|HOST&gt; &lt;COMMAND&gt;</code></p>
<p>该操作实现不必登录就直接执行命令。<code>&lt;COMMAND&gt;</code>参数是命令字符串，短小命令可以直接写在字符串中，较多命令执行时，建议写成shell脚本保存在远端服务器，并改为远程执行shell脚本。</p>
<h2 id="sshpass"><a href="#sshpass" class="headerlink" title="sshpass"></a>sshpass</h2><p><code>ssh -p &lt;PASSWORD&gt; ssh命令完整字符串</code></p>
<p>该命令的作用在于传递密码给ssh，方便自动登录。对于首次登录，<code>-o StrictHostKeyChecking=no</code>的ssh选项可以避免ssh交互。</p>
<p>该操作更加适合免密登录，因为便于无交互的批量操作。其本质是ssh登录后自动执行命令并自动退出登录。</p>
<h2 id="route"><a href="#route" class="headerlink" title="route"></a>route</h2><p>用于配置路由。路由一般认为是网关的实现。路由表中会有一个默认网关和其他指定网关。</p>
<h3 id="查看路由表"><a href="#查看路由表" class="headerlink" title="查看路由表"></a>查看路由表</h3><p><code>route</code> 或 <code>route -n</code></p>
<p>Destination 代表走这条路由的本机IP。默认其Destination是<code>0.0.0.0</code>，即物理本机，相当于本机IP的通配，代表了不在路由表中明确指定的所有本地IP。</p>
<p>Gateway 是网关地址</p>
<p>Genmask 是子网掩码，默认路由没有子网掩码，<code>0.0.0.0</code>和IP一样代表通配。因为IP+子网掩码才能表示一个IP网络地址。</p>
<p>Metric 代表优先级，值越高优先级越低。</p>
<h3 id="添加或删除默认路由（网关）"><a href="#添加或删除默认路由（网关）" class="headerlink" title="添加或删除默认路由（网关）"></a>添加或删除默认路由（网关）</h3><p><code>route add default gw &lt;GATEWAY&gt;</code></p>
<p><code>route del default gw &lt;GATEWAY&gt;</code></p>
<h3 id="添加或删除固定路由"><a href="#添加或删除固定路由" class="headerlink" title="添加或删除固定路由"></a>添加或删除固定路由</h3><p>也是基于<code>route add</code>和<code>route del</code>。</p>
<h2 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h2><p>重启系统，远程操作慎入。</p>
<h2 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h2><p>关闭系统。远程操作慎入。</p>
<h2 id="tc6000节点校园网连接"><a href="#tc6000节点校园网连接" class="headerlink" title="tc6000节点校园网连接"></a>tc6000节点校园网连接</h2><p>相关基础文档参见<a target="_blank" rel="noopener" href="http://zuits.zju.edu.cn/2017/0622/c12077a629723/page.htm">浙江大学信息技术中心</a>的linux端</p>
<p>在<code>/etc</code>目录下有集成命令的sh脚本<code>/etc/outside-net.sh</code>。</p>
<h1 id="五、账户与权限管理"><a href="#五、账户与权限管理" class="headerlink" title="五、账户与权限管理"></a>五、账户与权限管理</h1><h2 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h2><p>means “who am I”, get current user’s name.</p>
<h2 id="id"><a href="#id" class="headerlink" title="id"></a>id</h2><p><code>id [&lt;USERNAME&gt;]</code></p>
<p>用于查看指定账户的UID、GID信息。没有参数代表当前账户。</p>
<h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><p>修改文件IO权限, 记忆”change mode”<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4 =&gt; r #read</span><br><span class="line">2 =&gt; w #write</span><br><span class="line">1 =&gt; x #execute</span><br></pre></td></tr></table></figure><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x file  <span class="comment">#追加写权限</span></span><br><span class="line"><span class="built_in">chmod</span> 777 file <span class="comment">#自己、同组内用户、其他组用户的权限，7=rwx，即可读可写可执行</span></span><br><span class="line"><span class="built_in">chmod</span> -R 777 DIR <span class="comment">#递归修改</span></span><br></pre></td></tr></table></figure></p>
<h2 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h2><p>修改文件所有者及组群，-R代表递归修改子文件夹。记忆”change owner”</p>
<p>  chown -R 用户名 文件/文件夹<br>  chown -R 用户名:组群 文件/文件夹</p>
<h2 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp</h2><p>修改文件所属用户组，可以用chown实现相同操作。记忆”change group”。用户组信息在/etc/group中存在。</p>
<h2 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h2><p><code>useradd [-u &lt;UID&gt; -g &lt;GID|NAME&gt; -d &lt;HOME_DIR&gt;] &lt;USERNAME&gt;</code></p>
<p>用于创建指定名称的用户，可以用<code>-u</code>指定UID，用<code>-g</code>指定对应的用户组，<code>-d</code>指定用户目录（没有会创建）。当没有指定UID和GID时，会自动分配UID，并创建一个同用户名一样的Group名，GID等于UID（在不冲突的前提下）。用户信息基本保存在<code>/etc/passwd</code>(不过不如文件名那样，出于安全，现行Linux系统，密码现在不在里面保存)。对于服务器集群来说，只要两个服务器节点的用户UID/GID一致，那么就不会有权限冲突。因此服务器集群应当统一UID/GID，这也是<code>clusconf</code>帮我们做的事。clusconf默认指定用户组users。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ useradd -d /public/home/zju zju</span><br><span class="line">$ <span class="built_in">id</span> zju</span><br><span class="line">uid=1022(zju) gid=1022(zju) <span class="built_in">groups</span>=1022(zju)</span><br></pre></td></tr></table></figure></p>
<h2 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h2><p><code>userdel &lt;NAME&gt;</code></p>
<p>类似地，用于删除<strong>空闲</strong>用户。所谓空闲，指的是用户没有任何进程占据，包括没有登录（登录会有shell进程）。userdel会同时删除作为primary group的默认同名空闲group。</p>
<h2 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h2><p><code>usermod [&lt;OPTION&gt;...] &lt;USER&gt;</code></p>
<p>用于修改用户的一些属性，如UID、所属用户组（GID或名字都行）和用户目录等。</p>
<p>  -d 新用户目录<br>  -u 新UID<br>  -g 新GID/groups（group必须事先存在，这里的新指的是更换）</p>
<h2 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h2><p><code>groupadd [-g &lt;GID&gt;] &lt;NAME&gt;</code></p>
<p>用于创建指定名称的group，可以选择指定的GID，也可以让其自动分配。信息保存在<code>/etc/group</code>中。</p>
<h2 id="groupdel"><a href="#groupdel" class="headerlink" title="groupdel"></a>groupdel</h2><p><code>groupdel &lt;NAME&gt;</code></p>
<p>用于删除<strong>没有任何用户</strong>的group。有用户存在必须先删除用户或者修改用户的GID信息。</p>
<h2 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h2><p><code>groupmod [&lt;OPTION&gt;...] &lt;GROUP&gt;</code></p>
<p>与usermod类似，但用于修改group的GID等信息。</p>
<h2 id="clusconf"><a href="#clusconf" class="headerlink" title="clusconf"></a>clusconf</h2><p>曙光公司提供的服务器集群管理命令</p>
<p><code>clusconf -au &lt;USER&gt;</code> 在服务器集群体内创建统一用户。</p>
<h2 id="chsh"><a href="#chsh" class="headerlink" title="chsh"></a>chsh</h2><p>更改默认的shell终端。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /usr/bin/bash</span><br><span class="line">chsh -s /usr/bin/sh</span><br></pre></td></tr></table></figure></p>
<h2 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h2><p>结束当前终端（ssh）连接</p>
<h2 id="logout"><a href="#logout" class="headerlink" title="logout"></a>logout</h2><p>结束当前终端（ssh）连接</p>
<h1 id="六、设备管理"><a href="#六、设备管理" class="headerlink" title="六、设备管理"></a>六、设备管理</h1><h2 id="cfdisk"><a href="#cfdisk" class="headerlink" title="cfdisk"></a>cfdisk</h2><p><code>cfdisk /dev/sdb</code><br>对指定硬盘进行分区管理。分区后需要对freespace重新挂载。</p>
<p>此外，还有fdisk进行格式化硬盘分区。</p>
<h2 id="df"><a href="#df" class="headerlink" title="df"></a>df</h2><p><code>df -hT</code><br>显示挂载的分区</p>
<h2 id="lsblk"><a href="#lsblk" class="headerlink" title="lsblk"></a>lsblk</h2><p>显示当前所有分区，包括未挂载分区</p>
<h2 id="mount"><a href="#mount" class="headerlink" title="mount"></a>mount</h2><p><code>mount [-t filesystem] device folder</code></p>
<p>将本机硬盘分区或整个硬盘挂载到指定文件夹。一般需要先格式化分区或硬盘。</p>
<p><code>mount host|ip:remote_folder local_folder</code></p>
<p>将远程文件夹挂载到本地文件夹，如如<code>mount node210:/public /public</code>。需要远程机器配置允许才能使用，参见<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41554005/article/details/103892460">文档</a></p>
<h2 id="umount"><a href="#umount" class="headerlink" title="umount"></a>umount</h2><p><code>umount device</code></p>
<p>卸载挂载的分区或硬盘，<code>umount /dev/sdb1</code>。</p>
<h2 id="mkfs"><a href="#mkfs" class="headerlink" title="mkfs"></a>mkfs</h2><p><code>mkfs -t filesystem device</code></p>
<p>相似命令有<code>mkfs.ext4 device</code>等。用于格式化硬盘或分区。格式化前要求先卸载分区或硬盘。<br>配合fdisk可以进行分区创建与文件系统生成。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ sudo fdisk /dev/sdb</span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span></span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended (container <span class="keyword">for</span> logical partitions)</span><br><span class="line">Select (default p): </span><br><span class="line"></span><br><span class="line">Using default response p.</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (2048-976773167, default 2048): </span><br><span class="line">Last sector, +/-sectors or +/-size&#123;K,M,G,T,P&#125; (2048-976773167, default 976773167): </span><br><span class="line"></span><br><span class="line">Created a new partition 1 of <span class="built_in">type</span> <span class="string">&#x27;Linux&#x27;</span> and of size 465.8 GiB.</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">The partition table has been altered.</span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br><span class="line"></span><br><span class="line">$ sudo mkfs.ext4 /dev/sdb1</span><br><span class="line">$ sudo <span class="built_in">mkdir</span> /public</span><br><span class="line">$ sudo mount /dev/sdb1 /public</span><br><span class="line">$ sudo blkid /dev/sdb1 <span class="comment"># 查看UUID</span></span><br><span class="line">dev/sdb1: UUID=<span class="string">&quot;1e7e5ca8-f25f-42c5-b648-81904f46a07c&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;c3f1fc72-01&quot;</span></span><br><span class="line">$ vim /etc/fstab <span class="comment"># 修改实现开机自动挂载</span></span><br><span class="line">/dev/disk/by-uuid/1e7e5ca8-f25f-42c5-b648-81904f46a07c /public ext4 defaults 0 1</span><br></pre></td></tr></table></figure></p>
<h2 id="mkfs-ext4"><a href="#mkfs-ext4" class="headerlink" title="mkfs.ext4"></a>mkfs.ext4</h2><p><code>mkfs.ext4 /dev/sdb1</code></p>
<p>EXT4格式化指定分区。</p>
<p>卸载分区。</p>
<h2 id="lspci"><a href="#lspci" class="headerlink" title="lspci"></a>lspci</h2><p>用于列举当前服务器pci设备情况，常配合grep来查看显卡信息。</p>
<h2 id="nvidia-smi"><a href="#nvidia-smi" class="headerlink" title="nvidia-smi"></a>nvidia-smi</h2><p>用于列举英伟达GPU情况，需要安装英伟达GPU驱动和CUDA套件。</p>
<h2 id="lscpu"><a href="#lscpu" class="headerlink" title="lscpu"></a>lscpu</h2><p>一个CPU架构可以有多个CPU（C），一个CPU具有多个核（K），一个核有可以具有多个超线程（T），C即物理CPU数，K即CPU核数，T即每个核的超线程数，最终逻辑CPU数位<code>C*K*T</code><a target="_blank" rel="noopener" href="https://blog.csdn.net/l1394049664/article/details/81811642">参考文档</a>。通过lscpu命令可以查看cpu信息。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@node210 ~]# lscpu</span><br><span class="line">Architecture:          x86_64</span><br><span class="line">CPU op-mode(s):        32-bit, 64-bit</span><br><span class="line">Byte Order:            Little Endian</span><br><span class="line">CPU(s):                56    ## 逻辑CPU数</span><br><span class="line">On-line CPU(s) list:   0-55</span><br><span class="line">Thread(s) per core:    2     ## 超线程数</span><br><span class="line">Core(s) per socket:    14    ## CPU核数</span><br><span class="line">Socket(s):             2     ## 物理CPU数</span><br><span class="line">NUMA node(s):          2</span><br><span class="line">Vendor ID:             GenuineIntel</span><br><span class="line">CPU family:            6</span><br><span class="line">Model:                 85</span><br><span class="line">Model name:            Intel(R) Xeon(R) Gold 6132 CPU @ 2.60GHz</span><br><span class="line">Stepping:              4</span><br><span class="line">CPU MHz:               1000.000</span><br><span class="line">CPU max MHz:           2601.0000</span><br><span class="line">CPU min MHz:           1000.0000</span><br><span class="line">BogoMIPS:              5200.00</span><br><span class="line">Virtualization:        VT-x</span><br><span class="line">L1d cache:             32K</span><br><span class="line">L1i cache:             32K</span><br><span class="line">L2 cache:              1024K</span><br><span class="line">L3 cache:              19712K</span><br><span class="line">NUMA node0 CPU(s):     0-13,28-41</span><br><span class="line">NUMA node1 CPU(s):     14-27,42-55</span><br><span class="line">Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch epb cat_l3 cdp_l3 intel_ppin intel_pt ssbd mba ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm cqm mpx rdt_a avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local dtherm ida arat pln pts pku ospke spec_ctrl intel_stibp flush_l1d</span><br></pre></td></tr></table></figure><br>此外在linux下，cpu信息保存在<code>/proc/cpuinfo</code>中，故可以通过文件方法查看。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/cpuinfo|grep <span class="string">&quot;physical id&quot;</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span>|<span class="built_in">wc</span> -l            <span class="comment">## 物理CPU数</span></span><br><span class="line"><span class="built_in">cat</span> /proc/cpuinfo|grep <span class="string">&quot;cpu cores&quot;</span>|<span class="built_in">uniq</span>|awk -F<span class="string">&#x27;: &#x27;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> <span class="comment">## CPU核数</span></span><br><span class="line"><span class="built_in">cat</span> /proc/cpuinfo|grep <span class="string">&quot;processor&quot;</span>|<span class="built_in">sort</span>|<span class="built_in">wc</span> -l                   <span class="comment">## 逻辑CPU数</span></span><br></pre></td></tr></table></figure></p>
<h1 id="七、时间与时区管理"><a href="#七、时间与时区管理" class="headerlink" title="七、时间与时区管理"></a>七、时间与时区管理</h1><h2 id="ntpdate"><a href="#ntpdate" class="headerlink" title="ntpdate"></a>ntpdate</h2><p>该命令用于与指定的ntp时间服务器同步时间<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ntpdate ntp.ntsc.ac.cn  <span class="comment">## 国家授时中心</span></span><br><span class="line">ntpdate ntp.aliyun.com  <span class="comment">## 阿里云</span></span><br></pre></td></tr></table></figure></p>
<h2 id="date"><a href="#date" class="headerlink" title="date"></a>date</h2><p>该命令用于查看和修改系统时间。</p>
<h2 id="hwclock"><a href="#hwclock" class="headerlink" title="hwclock"></a>hwclock</h2><p>该命令用于查看和修改BIOS硬件时间。同时用于与系统时间相互同步。</p>
<h2 id="clusconf-1"><a href="#clusconf-1" class="headerlink" title="clusconf"></a>clusconf</h2><p>该命令中—sync-time或-yt指令，能够同步集群内服务器时间。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clusconf -yt</span><br></pre></td></tr></table></figure></p>
<h2 id="ntpd"><a href="#ntpd" class="headerlink" title="ntpd"></a>ntpd</h2><p>时间同步服务，其配置是/etc/ntp.conf，与ntpdate手动同步不同，它是自动同步。</p>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">GCS-ZHN</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://gcszhn.top/2022/04/25/linux/">https://gcszhn.top/2022/04/25/linux/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://gcszhn.top">潇洒记忆</a>！</span></div></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2022/04/26/nginx/"><i class="fas fa-angle-left">&nbsp;</i><span>nginx学习笔记</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2022/04/20/clash/"><span>基于Clash配置linux服务器代理</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2024 By GCS-ZHN</div><a href="https://beian.miit.gov.cn/" target="_blank">&nbsp; 浙ICP备2022014039号</a></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>